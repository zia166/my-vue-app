(function(){"use strict";var t={6326:function(t,e,s){var a=s(7195),r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("div",{staticClass:"navbar-text navbar-nav m-3 w-auto sidebar shadow p-4"},[e("router-link",{staticClass:"text-decoration-none",attrs:{to:"/"}},[e("i",{staticClass:"fas fa-home m-2"})]),e("br"),e("router-link",{staticClass:"text-decoration-none",attrs:{to:"/coverage"}},[e("i",{staticClass:"fas fa-map m-2"})])],1),e("div",{staticClass:"content"},[e("router-view")],1)])},o=[],n={name:"App"},l=n,i=s(1001),c=(0,i.Z)(l,r,o,!1,null,null,null),d=c.exports,p=s(2241),u=function(){var t=this,e=t._self._c;return e("div",[e("svg",{attrs:{width:"380px",height:"500px",viewBox:"0 0 837 1045",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:sketch":"http://www.bohemiancoding.com/sketch/ns"}},[e("g",{attrs:{id:"Page-1",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd","sketch:type":"MSPage"}},[e("path",{attrs:{d:"M353,9 L626.664028,170 L626.664028,487 L353,642 L79.3359724,487 L79.3359724,170 L353,9 Z",id:"Polygon-1",stroke:"#007FB2","stroke-width":"6","sketch:type":"MSShapeGroup"}}),e("path",{attrs:{d:"M78.5,529 L147,569.186414 L147,648.311216 L78.5,687 L10,648.311216 L10,569.186414 L78.5,529 Z",id:"Polygon-2",stroke:"#EF4A5B","stroke-width":"6","sketch:type":"MSShapeGroup"}}),e("path",{attrs:{d:"M773,186 L827,217.538705 L827,279.636651 L773,310 L719,279.636651 L719,217.538705 L773,186 Z",id:"Polygon-3",stroke:"#795D9C","stroke-width":"6","sketch:type":"MSShapeGroup"}}),e("path",{attrs:{d:"M639,529 L773,607.846761 L773,763.091627 L639,839 L505,763.091627 L505,607.846761 L639,529 Z",id:"Polygon-4",stroke:"#F2773F","stroke-width":"6","sketch:type":"MSShapeGroup"}}),e("path",{attrs:{d:"M281,801 L383,861.025276 L383,979.21169 L281,1037 L179,979.21169 L179,861.025276 L281,801 Z",id:"Polygon-5",stroke:"#36B455","stroke-width":"6","sketch:type":"MSShapeGroup"}})])]),e("div",{staticClass:"message-box"},[e("h2",[t._v("Coverage Overview")]),e("p",[t._v("Purpose: Create a dynamic “Coverage Overview” map that allows the user to view the parts of the UK that are covered by the installers in certain network. The user should also be able to select any combination of chargers, installers, or areas (postcode and range combinations) to narrow down the results.")]),e("div",{staticClass:"buttons-con"},[e("div",{staticClass:"action-link-wrap"},[e("router-link",{staticClass:"text-decoration-none link-button",attrs:{to:"/coverage"}},[t._v("Coverage Overview")])],1)])])])},h=[],g={},m=(0,i.Z)(g,u,h,!1,null,"d8c02e48",null),v=m.exports,f=function(){var t=this,e=t._self._c;return e("div",{staticClass:"bg container-fluid"},[e("div",{staticClass:"bg form-control"},[t._m(0),e("div",{staticClass:"row form-comtrol mx-xxl-auto shadow m-4 pb-4 pt-3 container"},[t._m(1),e("div",{staticClass:"col"},[e("label",{attrs:{for:"chargers"}},[t._v("Chargers:")]),e("div",{staticClass:"dropdown d-xl-inline-grid m-lg-4 w-75"},[e("button",{staticClass:"btn btn-secondary dropdown-toggle",attrs:{type:"button",id:"chargersDropdown","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v(" "+t._s(t.selectedChargers.length?t.selectedChargersText:"Select Charger")+" ")]),e("div",{staticClass:"dropdown-menu w-100 text-center",attrs:{"aria-labelledby":"chargersDropdown"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedChargers,expression:"selectedChargers"}],staticClass:"dropdown-item text-uppercase pb-5",attrs:{multiple:""},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedChargers=e.target.multiple?s:s[0]}}},t._l(t.chargerOptions,(function(s){return e("option",{key:s,staticClass:"p-2",domProps:{value:s}},[t._v(" "+t._s(s)+" ")])})),0)])])]),e("div",{staticClass:"col"},[e("label",{attrs:{for:"installers"}},[t._v("Installers:")]),e("div",{staticClass:"dropdown d-xl-inline-grid m-lg-4 w-75"},[e("button",{staticClass:"btn btn-secondary dropdown-toggle",attrs:{type:"button",id:"installersDropdown","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",value:t.selectedInstallers.length?t.selectedInstallersText:"Select Installers"}},[t._v(" "+t._s(t.selectedInstallers.length?t.selectedInstallersText:"Select Installers")+" ")]),e("div",{staticClass:"dropdown-menu w-100 text-center",attrs:{"aria-labelledby":"installersDropdown"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedInstallers,expression:"selectedInstallers"}],staticClass:"dropdown-item text-uppercase pb-5",attrs:{multiple:""},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedInstallers=e.target.multiple?s:s[0]}}},t._l(t.installerOptions,(function(s,a){return e("option",{key:a,staticClass:"p-2",domProps:{value:a}},[t._v(" "+t._s(s)+" ")])})),0)])])])]),e("div",{staticClass:"row p-4 mt-2"},[e("div",{staticClass:"col shadow mx-sm-3 input-group form-control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.postcode,expression:"postcode"}],staticClass:"form-control",attrs:{type:"text",id:"postcode",placeholder:"Enter postcode"},domProps:{value:t.postcode},on:{input:function(e){e.target.composing||(t.postcode=e.target.value)}}}),t._m(2)]),e("div",{staticClass:"col shadow mx-sm-3 input-group form-control"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.radius,expression:"radius"}],staticClass:"form-control",attrs:{type:"number",placeholder:"Radius (in miles)"},domProps:{value:t.radius},on:{input:function(e){e.target.composing||(t.radius=e.target.value)}}}),t._m(3)]),e("button",{staticClass:"col-xxl-1 btn btn-outline-danger",on:{click:function(e){return t.clearFilter()}}},[t._v("Clear Filter")])]),e("div",{staticClass:"p-2 shadow-lg"},[e("gmap-map",{staticStyle:{width:"100%",height:"600px"},attrs:{center:t.mapCenter,zoom:t.mapZoom}},t._l(t.markers,(function(s,a){return e("gmap-marker",{key:a,attrs:{position:t.getPosition(s.position)}},[e("GmapInfoWindow",{attrs:{options:{maxWidth:200}}},[e("div",{staticClass:"p-2"},[e("h6",{staticClass:"text-uppercase"},[t._v(t._s(s.installerName))]),e("p",{staticClass:"fw-medium m-0"},[t._v("On going Installation")]),e("ul",{staticClass:"installation-list"},t._l(s.chargers,(function(s){return e("li",{key:s},[t._v(t._s(s))])})),0),e("p",{staticClass:"text-danger fw-bold"},[t._v("Pending: "+t._s(t.getCapacity(s.chargers)))])])])],1)})),1)],1)]),t.loading?e("div",{staticClass:"loading-overlay"},[e("div",{staticClass:"loading-spinner"})]):t._e()])},w=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"form-control shadow p-3"},[e("h1",[t._v("Coverage Overview")])])},function(){var t=this,e=t._self._c;return e("h4",[t._v("Filters "),e("i",{staticClass:"fas fa-filter"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"input-group-append"},[e("span",{staticClass:"input-group-text"},[e("i",{staticClass:"fas fa-street-view"})])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"input-group-append"},[e("span",{staticClass:"input-group-text"},[e("i",{staticClass:"fas fa-map-marker-alt"})])])}],C=(s(7658),JSON.parse('{"S":{"L":[{"installer1":{"postcode":[{"code":"SW1A 1AA","radius":40}],"chargers":["Easee One","Ohme Home Pro","Indra Smart Pro"]}},{"installer2":{"postcode":[{"code":"SW1A 1AB","radius":30},{"code":"EC1A 1BB","radius":40},{"code":"SW1A 1BB","radius":50}],"chargers":["Mini Pro3","Ohme Epod","Zappi 2.1","Wallbox Pulsar Plus"]}},{"installer3":{"postcode":[{"code":"W1A 1HQ","radius":30},{"code":"W1A 3AE","radius":60},{"code":"W1A 3AA","radius":50}],"chargers":["Easee One","Indra Smart Pro","Zappi 2.1"]}},{"installer4":{"postcode":[{"code":"NW1W 6AA","radius":30},{"code":"NW1W 6AB","radius":60},{"code":"NW1W 6AG","radius":50}],"chargers":["Mini Pro3","Ohme Epod","Wallbox Pulsar Plus"]}},{"installer5":{"postcode":[{"code":"SE1 9GF","radius":80}],"chargers":["Easee One","Indra Smart Pro","Zappi 2.1","Wallbox Pulsar Plus"]}},{"installer6":{"postcode":[{"code":"SW1V 2SA","radius":80}],"chargers":["Mini Pro3","Ohme Home Pro","Indra Smart Pro","Zappi 2.1"]}},{"installer7":{"postcode":[{"code":"EC2A 4BX","radius":100}],"chargers":["Easee One","Ohme Home Pro","Wallbox Pulsar Plus"]}},{"installer8":{"postcode":[{"code":"W1G 9RJ","radius":150}],"chargers":["Mini Pro3","Indra Smart Pro","Zappi 2.1"]}},{"installer9":{"postcode":[{"code":"NW1 4RY","radius":150}],"chargers":["Easee One","Ohme Epod","Zappi 2.1","Wallbox Pulsar Plus"]}},{"installer10":{"postcode":[{"code":"SE1 7PB","radius":150}],"chargers":["Mini Pro3","Ohme Home Pro","Indra Smart Pro"]}}]}}'));function b(t,e){const s=Math.abs(t.lat-e.lat),a=Math.abs(t.lng-e.lng),r=Math.sqrt(s**2+a**2);return r}var y={data(){return{selectedChargers:[],selectedInstallers:[],postcode:"",radius:"",markers:[],chargerOptions:["Mini Pro3","Easee One","Ohme Home Pro","Ohme Epod","Indra Smart Pro","Zappi 2.1","Wallbox Pulsar Plus"],installerOptions:[],installers:[],mapCenter:{lat:51.5074,lng:-.1278},mapZoom:10,infoWindowPosition:null,infoWindowOpened:!1,infoWindowTitle:"",infoWindowChargers:[]}},mounted(){this.populateInstallerOptions()},computed:{selectedChargersText(){return this.selectedChargers.join(", ")},selectedInstallersText(){return this.selectedInstallers.map((t=>this.installerOptions[t])).join(", ")}},methods:{getCapacity(t){const e=3,s=t.length-e;return s.toString()},handleFilterInstallers(){this.filterInstallers()},populateInstallerOptions(){const t=C.S.L;this.installerOptions=t.map((t=>Object.keys(t)[0]))},async filterInstallers(){const t=C.S.L,e=[];if(0!==this.selectedInstallers.length||0!==this.selectedChargers.length||""!==this.postcode||""!==this.radius){for(const a of t){const t=Object.keys(a)[0],r=a[t],o=this.selectedChargers,n=this.postcode,l=this.radius,i=""===n,c=""===l;this.markers=[];const d=this.selectedInstallers.map((t=>this.installerOptions[t])),p=0===o.length||o.every((t=>r.chargers.includes(t))),u=0===d.length||d.includes(t);if(u&&p&&i&&c){const s=await this.getInstallerCoordinates(a);s.length>0&&s.forEach((s=>{e.push({position:{lat:s.lat,lng:s.lng},installerName:t,chargers:r.chargers})}))}else if(""!==n){const a=r.postcode.find((t=>t.code===n));if(a){const s=await this.geocodePostcode(n);s&&s.lat&&s.lng&&e.push({position:{lat:s.lat,lng:s.lng},installerName:t,chargers:r.chargers})}else{let a;try{const t=await this.geocodePostcode(n);a={lat:t.lat,lng:t.lng}}catch(s){return}this.loading=!0;const o=await Promise.all(C.S.L.map((async t=>{const e=Object.keys(t)[0],a=t[e].postcode.map((async t=>{try{const e=await this.geocodePostcode(t.code);return{code:t.code,lat:e.lat,lng:e.lng}}catch(s){return console.error(`Error geocoding ${t.code}:`,s),null}finally{this.loading=!1}})),r=await Promise.all(a);return r}))),l=o.flat().reduce(((t,e)=>(null!==e&&(t[e.code]={lat:e.lat,lng:e.lng}),t)),{}),i=.2;let c=[];for(const s in l){const o=b(a,l[s]);o<=i&&s!==n&&c.push(s);const d=await this.geocodePostcode(c);d&&d.lat&&d.lng&&e.push({position:{lat:d.lat,lng:d.lng},installerName:t,chargers:r.chargers})}}}else if(null!=l){const s=r.postcode.find((t=>t.radius==l)),a=r.postcode[0].code;if(s){const s=await this.geocodePostcode(a);s&&s.lat&&s.lng&&e.push({position:{lat:s.lat,lng:s.lng},installerName:t,chargers:r.chargers})}}}this.markers=e}else this.markers=e},async getInstallerCoordinates(t){const e=Object.values(t)[0].postcode,s=[];if(Array.isArray(e))for(const r of e){const t=r.code;try{const e=await this.geocodePostcode(t);e&&e.lat&&e.lng&&s.push({lat:e.lat,lng:e.lng})}catch(a){console.error("Error getting installer coordinates:",a)}}else if("string"===typeof e){const t=e;try{const e=this.geocodePostcode(t);e&&e.lat&&e.lng&&s.push({lat:e.lat,lng:e.lng})}catch(a){console.error("Error getting installer coordinates:",a)}}return s},async geocodePostcode(t){const e="AIzaSyABDC0dUVtV6uOZjepOYjTd2eKdr4FwtDo",s=`https://maps.googleapis.com/maps/api/geocode/json?address=${t}&key=${e}`;try{const t=await fetch(s),e=await t.json();if(console.log(e),"OK"===e.status){const{lat:t,lng:s}=e.results[0].geometry.location;return{lat:t,lng:s}}throw new Error("Unable to geocode postcode")}catch(a){console.error("Error geocoding postcode:",a)}},getPosition(t){return Array.isArray(t)?t.map((t=>({lat:Number(t.lat),lng:Number(t.lng)}))):t?{lat:Number(t.lat),lng:Number(t.lng)}:null},clearFilter(){this.selectedInstallers=[],this.postcode="",this.radius="",this.selectedChargers=[],this.markers=[],this.infoWindowOpened=!1,this.filterInstallers()}},watch:{selectedInstallers:{deep:!0,handler:"handleFilterInstallers"},selectedChargers:{deep:!0,handler:"handleFilterInstallers"},postcode:{deep:!0,handler:"handleFilterInstallers"},radius:{deep:!0,handler:"handleFilterInstallers"}}},P=y,x=(0,i.Z)(P,f,w,!1,null,null,null),_=x.exports;a.ZP.use(p.Z);const O=new p.Z({routes:[{path:"/",name:"LoginForm",component:v},{path:"/coverage",name:"CoverageOverview",component:_}],mode:"history"});var k=O,S=(s(4894),s(1622));a.ZP.use(S,{load:{key:"AIzaSyABDC0dUVtV6uOZjepOYjTd2eKdr4FwtDo"}}),new a.ZP({router:k,render:t=>t(d)}).$mount("#app")}},e={};function s(a){var r=e[a];if(void 0!==r)return r.exports;var o=e[a]={exports:{}};return t[a].call(o.exports,o,o.exports,s),o.exports}s.m=t,function(){var t=[];s.O=function(e,a,r,o){if(!a){var n=1/0;for(d=0;d<t.length;d++){a=t[d][0],r=t[d][1],o=t[d][2];for(var l=!0,i=0;i<a.length;i++)(!1&o||n>=o)&&Object.keys(s.O).every((function(t){return s.O[t](a[i])}))?a.splice(i--,1):(l=!1,o<n&&(n=o));if(l){t.splice(d--,1);var c=r();void 0!==c&&(e=c)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[a,r,o]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var r,o,n=a[0],l=a[1],i=a[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(r in l)s.o(l,r)&&(s.m[r]=l[r]);if(i)var d=i(s)}for(e&&e(a);c<n.length;c++)o=n[c],s.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return s.O(d)},a=self["webpackChunkcoverage_map"]=self["webpackChunkcoverage_map"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(6326)}));a=s.O(a)})();
//# sourceMappingURL=app.7c64abff.js.map